<div class="journalEntries ui-g">

  <div class="header ui-g-12">
    <h2>Journal Entries</h2>

    <button type="button" (click)="showDialog()" class="pull-right ui-button-success" pButton label="Add New"
      icon="fa fa-plus"></button>
  </div>

  <p-table [value]="journalEntries">
    <ng-template pTemplate="header">
      <tr>
        <th>Id</th>
        <th>date</th>
        <th>debit</th>
        <th pSortableColumn="credit">credit <p-sortIcon field="credit"></p-sortIcon>
        </th>
        <th>ReadyForPosting</th>
        <th>Posted</th>
      </tr>

    </ng-template>
    <ng-template pTemplate="body" let-entry>
      <tr>
        <td>{{entry.id}}</td>
        <td>{{entry.date}}</td>
        <td>{{entry.debit}}</td>
        <td>{{entry.credit}}</td>
        <td>{{entry.readyForPosting}}</td>
        <td>{{entry.posted}}</td>
      </tr>
    </ng-template>
  </p-table>

  <!-- [style]="{width: '80vw'}" [contentStyle]="{minHeight: '70vh'}" -->
  <p-dialog class="ui-g" [(visible)]="display" modal="true">

    <p-header>Add New Journal Entry</p-header>

    <form [formGroup]="JournalEntryForm" (ngSubmit)="saveEntry()" #documentEditForm="ngForm" class="ui-g">

<!-- 
<div class="ui-fluid">
  <div class="p-grid forms-grid">
    <div class="p-col-12 p-md-6">
      <div>InputText</div>
      <input pInputText type="text" />
  </div>
  <div class="p-col-12 p-md-6">
      <div>Textarea</div>
      <input pInputText type="text" />
  </div>
  </div>

</div> -->




      <div class="ui-g-12">

        <!-- Date -->
        <div class="ui-g">
          <label class="control-label" for="date">Date*</label>
          <!-- <input type="date" class="form-control" name="date" required /> -->
          <!-- <input  type="text" pInputText class="ui-g-12 ui-md-5" name="date" formControlName="date" required /> -->
          <p-calendar [showIcon]="true" formControlName="date" required></p-calendar>
          
        </div>

        <!-- RefNo -->
        <div class="ui-g">
          <label for="referenceNo" class="ui-g-12 ui-md-2">Ref. No*</label>
          <input type="text" pInputText class="ui-g-12 ui-md-5" name="referenceNo" formControlName="referenceNo"
            required />
          <div class="ui-g-12 ui-md-5">
            <!-- for error message -->
          </div>
        </div>

        <!-- Memo -->
        <div class="ui-g">
          <label for="memo" class="ui-g-12 ui-md-2">Memo</label>
          <input type="text" pInputText class="ui-g-12 ui-md-5" name="memo" formControlName="memo" required />
          <div class="ui-g-12 ui-md-5">
            <!-- for error message -->
          </div>
        </div>

        <!-- Posted -->
        <div class="ui-g">
          <label for="Posted" class="ui-g-12 ui-md-2">Posted</label>
          <p-checkbox [formControl]="JournalEntryForm.controls['posted']" [binary]="true" [readonly]="true">
          </p-checkbox>
          <div class="ui-g-12 ui-md-5">
            <!-- for error message -->
          </div>
        </div>

        <hr>

        <!-- Button AddLine -->
        <button pButton label="Add Line" (click)="addLine()" [disabled]="!lines.valid" icon="fa fa-plus"></button>

        <!-- Lines -->
        <div class="ui-g">

          <table style="width:100%">
            <tr>
              <th>Account</th>
              <th>Dr/Cr</th>
              <th>Amount</th>
              <th>Memo</th>
              <th>Actions</th>
            </tr>

            <tbody formArrayName="lines" *ngFor="let line of lines.controls; let i = index">

              <tr [formGroupName]="i">
                <!-- Account DropDown -->
                <td>
                  <p-dropdown id="{{ 'accountId' + i}}" [options]="accounts" formControlName="selectedAccount"
                    optionLabel="name"></p-dropdown>
                </td>

                <!-- Dr/Cr DropDown -->
                <td>
                  <p-dropdown id="{{ 'drcrId' + i}}" [options]="drcr" formControlName="selectedDrCr" optionLabel="name">
                  </p-dropdown>
                </td>

                <!-- Amount Field -->
                <td>
                  <p-inputNumber id="{{ 'amountId' + i}}" formControlName="lineAmount" mode="decimal"
                    [minFractionDigits]="2"></p-inputNumber>
                </td>

                <!-- Memo Field -->
                <td><input id="{{ 'memoId' + i}}" type="text" pInputText name="lineMemo" formControlName="lineMemo" />
                </td>

                <!-- Actions -->
                <td><button id="{{ 'deleteButtonId' + i}}" pButton [disabled]="true" icon="fa fa-times"></button></td>

              </tr>

            </tbody>

          </table>

        </div>



        <!-- <button pButton  type="submit" [disabled]="hasFormErrors()" label="Save" icon="fa fa-floppy-o"></button> -->
      </div>
    </form>

    <p-footer>

      <button type="button" (click)="closeDialog()" class="pull-right ui-button-secondary" pButton label="Close"
        icon="fa fa-times"></button>

      <button type="button" (click)="documentEditForm.ngSubmit.emit()" [disabled]="!documentEditForm.form.valid"
        class="pull-right ui-button-primary" pButton label="Save" icon="fa fa-floppy-o"></button>

    </p-footer>

  </p-dialog>

</div>